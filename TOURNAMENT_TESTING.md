# Інструкція для тестування системи турнірів

## ⚠️ ВАЖЛИВО: Нова логіка роботи

**Реєстрація на турніри тепер працює через ГРАВЦІВ, а не USERS!**

- ✅ Турнір реєструє **реальних гравців** з таблиці `players`
- ✅ User accounts мають `player_id` - зв'язок з гравцем
- ✅ Після турніру оновлюється рейтинг **гравців**, а не users
- ✅ Адмін бачить список **гравців** (не users) для додавання

## Тестові акаунти

### Адміністратор
- **Username**: `admin`
- **Password**: `admin123`
- **player_id**: `null` (адмін не є гравцем)

### Користувачі
- **Username**: `user1`, `user2`, `user3`, `user4`, `user5`
- **Password**: `user123` (для всіх)
- **player_id**: Потрібно привʼязати до реальних гравців!

---

## Сценарії тестування

### 1. ✅ Створення турніру (Адмін)

1. Зайдіть на сайт http://localhost:3000
2. Натисніть **"Увійти"**
3. Введіть `admin` / `admin123`
4. Перейдіть на вкладку **"Турніри"**
5. Натисніть **"Створити турнір"**
6. Заповніть форму:
   - Назва: `Тестовий турнір 2026`
   - Опис: `Перший тестовий турнір`
   - Статус: `Реєстрація`
   - Дата початку: `2026-01-15`
   - Дата закінчення: `2026-01-20`
7. Натисніть **"Створити"**
8. **Очікуваний результат**: Турнір з'явиться в списку з жовтою міткою "Реєстрація"

---

### 2. ✅ Самостійна реєстрація користувача

1. **Вийдіть** з акаунта адміна
2. Натисніть **"Увійти"**
3. Введіть `user1` / `user123`
4. Перейдіть на вкладку **"Турніри"**
5. Натисніть на створений турнір
6. Натисніть **"Зареєструватись"**
7. **Очікуваний результат**: 
   - Кнопка зміниться на "Скасувати реєстрацію"
   - В списку учасників з'явиться `user1`
   - Кількість учасників збільшиться на 1
   - На картці турніру з'явиться зелена позначка "✓ Ви зареєстровані"

---

### 3. ✅ Адміністратор додає користувачів вручну

1. **Вийдіть** з акаунта user1
2. Увійдіть як **admin** / **admin123**
3. Перейдіть на вкладку **"Турніри"**
4. Натисніть на турнір
5. Натисніть **"Додати користувача"**
6. **Очікуваний результат**: З'явиться список доступних користувачів (user2, user3, user4, user5)
7. Натисніть **"Додати"** біля `user2`
8. **Очікуваний результат**:
   - `user2` з'явиться в списку учасників
   - Біля його імені буде написано "(адміністратором)"
   - Кількість учасників: 2

---

### 4. ✅ Скасування реєстрації

1. **Вийдіть** з адмін акаунта
2. Увійдіть як **user1** / **user123**
3. Відкрийте турнір
4. Натисніть **"Скасувати реєстрацію"**
5. **Очікуваний результат**:
   - user1 зникне зі списку учасників
   - Кнопка зміниться на "Зареєструватись"
   - Зелена позначка "✓ Ви зареєстровані" зникне

---

### 5. ✅ Адміністратор видаляє користувача

1. Увійдіть як **admin** / **admin123**
2. Відкрийте турнір
3. Знайдіть `user2` в списку учасників
4. Натисніть **"Видалити"** біля його імені
5. **Очікуваний результат**:
   - user2 зникне зі списку
   - Кількість учасників зменшиться

---

### 6. ✅ Фільтрація турнірів

1. Створіть ще 2 турніри:
   - Один зі статусом "Триває"
   - Один зі статусом "Закінчився"
2. На вкладці "Турніри" натискайте на фільтри:
   - **"Всі"** - показує всі турніри
   - **"Реєстрація"** - тільки з жовтою міткою
   - **"Триває"** - тільки з зеленою міткою
   - **"Закінчені"** - тільки з сірою міткою

---

## Перевірка виправлених проблем

### ✅ Токен авторизації
- Раніше: помилка "Необхідна авторизація" при створенні турніру
- Зараз: використовується правильний ключ `auth_token`
- **Тест**: Адмін може успішно створити турнір

### ✅ Кольори тексту
- Раніше: сірий текст `text-gray-500`
- Зараз: чорний текст за замовчуванням
- **Тест**: Текст "Турнірів не знайдено" і "Ще немає зареєстрованих учасників" - чорного кольору

### ✅ Вибір користувачів
- Раніше: потрібно вводити ID користувача вручну
- Зараз: список користувачів з кнопками "Додати"
- **Тест**: Адмін бачить список з іменами, а не полем для ID

---

## API Endpoints

Всі endpoints доступні через http://localhost:8000

### Турніри
- `GET /api/tournaments/` - Список турнірів
- `GET /api/tournaments/?status=pending` - Фільтр по статусу
- `POST /api/tournaments/` - Створити турнір (admin)
- `GET /api/tournaments/{id}` - Деталі турніру
- `POST /api/tournaments/{id}/register` - Самореєстрація
- `POST /api/tournaments/{id}/register-user` - Адмін додає user
- `DELETE /api/tournaments/{id}/unregister` - Скасувати реєстрацію
- `DELETE /api/tournaments/{id}/unregister-user/{user_id}` - Адмін видаляє user

### Користувачі
- `GET /api/auth/users/` - Список всіх користувачів (admin)

---

## Troubleshooting

### Помилка "Необхідна авторизація"
- Перевірте, що ви залогінені
- Очистіть localStorage і залогіньтесь знову
- Перевірте консоль браузера (F12)

### Турнір не створюється
- Перевірте, що ви залогінені як admin
- Назва турніру обов'язкова
- Перевірте консоль backend в терміналі

### Користувач не додається
- Перевірте, що турнір має статус "Реєстрація"
- Перевірте, що користувач ще не зареєстрований
- Тільки admin може додавати користувачів вручну
